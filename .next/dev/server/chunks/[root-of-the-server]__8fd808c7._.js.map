{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///D:/ELECTION/SiteRAG/presiapp/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\n\nconst globalForPrisma = global as unknown as { prisma: PrismaClient }\n\nexport const prisma =\n  globalForPrisma.prisma ||\n  new PrismaClient({\n    log: ['query'],\n  })\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AAEC,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK;QAAC;KAAQ;AAChB;AAEF,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///D:/ELECTION/SiteRAG/presiapp/app/api/centres/%5Bid%5D/bureaux/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport { prisma } from \"@/lib/prisma\";\r\n\r\nexport async function GET(\r\n  request: NextRequest,\r\n  context: { params: Promise<{ id: string }> }\r\n) {\r\n  try {\r\n    // â›” FIX : params est un Promise â†’ il faut lâ€™attendre\r\n    const { id } = await context.params;\r\n\r\n    const centreId = Number(id);\r\n    if (isNaN(centreId)) {\r\n      return NextResponse.json(\r\n        { error: \"Invalid centre id\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // ðŸ‘‰ Charger bureaux + rÃ©sultats (pour filtrer dÃ©pouillÃ©s)\r\n    const bureaux = await prisma.bureau.findMany({\r\n      where: { centreId },\r\n      include: { resultats: true },\r\n    });\r\n\r\n    // ðŸ‘‰ Filtrer bureaux dÃ©jÃ  dÃ©pouillÃ©s\r\n    const bureauxNonDepouilles = bureaux.filter(\r\n      (b) => !b.resultats || b.resultats.length === 0\r\n    );\r\n\r\n    return NextResponse.json(bureauxNonDepouilles);\r\n  } catch (error) {\r\n    console.error(\"API /centres/[id]/bureaux error:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Server error\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IACpB,OAAoB,EACpB,OAA4C;IAE5C,IAAI;QACF,qDAAqD;QACrD,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM,QAAQ,MAAM;QAEnC,MAAM,WAAW,OAAO;QACxB,IAAI,MAAM,WAAW;YACnB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAoB,GAC7B;gBAAE,QAAQ;YAAI;QAElB;QAEA,2DAA2D;QAC3D,MAAM,UAAU,MAAM,yHAAM,CAAC,MAAM,CAAC,QAAQ,CAAC;YAC3C,OAAO;gBAAE;YAAS;YAClB,SAAS;gBAAE,WAAW;YAAK;QAC7B;QAEA,qCAAqC;QACrC,MAAM,uBAAuB,QAAQ,MAAM,CACzC,CAAC,IAAM,CAAC,EAAE,SAAS,IAAI,EAAE,SAAS,CAAC,MAAM,KAAK;QAGhD,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,oCAAoC;QAClD,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAe,GACxB;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}