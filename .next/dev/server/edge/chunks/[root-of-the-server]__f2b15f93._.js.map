{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\n\nexport function middleware(request: NextRequest) {\n  const token = request.cookies.get('token')?.value\n  const userCookie = request.cookies.get('user')?.value\n  const { pathname } = request.nextUrl\n\n  // Parse user from cookie\n  let user = null\n  if (userCookie) {\n    try {\n      user = JSON.parse(userCookie)\n    } catch (e) {\n      // Invalid JSON\n    }\n  }\n\n  // Protected routes\n  if (pathname.startsWith('/dashboard')) {\n    if (!token) {\n      return NextResponse.redirect(new URL('/login', request.url))\n    }\n\n    // Admin-only routes\n    if (\n      pathname.includes('/candidates') ||\n      pathname.includes('/elections') ||\n      pathname.includes('/locations') ||\n      pathname.includes('/users')\n    ) {\n      if (user && user.role !== 'admin') {\n        return NextResponse.redirect(new URL('/dashboard', request.url))\n      }\n    }\n\n    // Operator-only routes\n    if (pathname.includes('/results/entry')) {\n      if (user && user.role !== 'operator') {\n        return NextResponse.redirect(new URL('/dashboard', request.url))\n      }\n    }\n  }\n\n  // Public routes\n  if (pathname === '/login') {\n    if (token) {\n      return NextResponse.redirect(new URL('/dashboard', request.url))\n    }\n  }\n\n  return NextResponse.next()\n}\n\nexport const config = {\n  matcher: ['/dashboard/:path*', '/login'],\n}\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAEO,SAAS,WAAW,OAAoB;IAC7C,MAAM,QAAQ,QAAQ,OAAO,CAAC,GAAG,CAAC,UAAU;IAC5C,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC,SAAS;IAChD,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IAEpC,yBAAyB;IACzB,IAAI,OAAO;IACX,IAAI,YAAY;QACd,IAAI;YACF,OAAO,KAAK,KAAK,CAAC;QACpB,EAAE,OAAO,GAAG;QACV,eAAe;QACjB;IACF;IAEA,mBAAmB;IACnB,IAAI,SAAS,UAAU,CAAC,eAAe;QACrC,IAAI,CAAC,OAAO;YACV,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,QAAQ,GAAG;QAC5D;QAEA,oBAAoB;QACpB,IACE,SAAS,QAAQ,CAAC,kBAClB,SAAS,QAAQ,CAAC,iBAClB,SAAS,QAAQ,CAAC,iBAClB,SAAS,QAAQ,CAAC,WAClB;YACA,IAAI,QAAQ,KAAK,IAAI,KAAK,SAAS;gBACjC,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,cAAc,QAAQ,GAAG;YAChE;QACF;QAEA,uBAAuB;QACvB,IAAI,SAAS,QAAQ,CAAC,mBAAmB;YACvC,IAAI,QAAQ,KAAK,IAAI,KAAK,YAAY;gBACpC,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,cAAc,QAAQ,GAAG;YAChE;QACF;IACF;IAEA,gBAAgB;IAChB,IAAI,aAAa,UAAU;QACzB,IAAI,OAAO;YACT,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,cAAc,QAAQ,GAAG;QAChE;IACF;IAEA,OAAO,gMAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;QAAqB;KAAS;AAC1C"}}]
}